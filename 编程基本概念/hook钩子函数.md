### 什么是Hook
---
Hook（钩子）是一种编程技术，**可以让开发者在程序运行的不同阶段“钩入”（hook into）一些代码，并在这些代码执行时进行自定义的操作。** Hook 的名称来自于其类似于一个鱼钩（hook），将自定义的代码“钩入”到程序运行的流程中。

Hook 的概念和作用在不同的编程语言中可能有所不同，但其基本原理都是相似的。
- 在 Windows 系统编程中，Hook 可以被用来**截获和处理消息、监控系统事件、拦截和修改系统调用等。**
- 在 Web 开发中，Hook 可以用来**修改 HTTP 请求和响应、记录日志、实现缓存等。**
- 在框架开发中，Hook 可以用来**扩展框架的功能、添加插件、实现 AOP（面向切面编程）等。**

Hook 的历史可以追溯到早期的操作系统和编程语言。

在早期的计算机系统中，Hook 被用来**处理硬件中断、监控输入设备等。** 
- 在 C 语言中，Hook 可以通过**函数指针**实现。
- 在面向对象编程中，Hook 可以通过**虚函数（virtual function）**实现。
- 在现代编程语言中，Hook 通常是以**事件（event）和回调函数（callback）** 的形式存在，可以被用于实现非常复杂的功能和扩展。

总之，Hook 是一种强大的编程技术，可以让开发者在程序运行的不同阶段注入自定义代码，实现各种功能和扩展。无论在哪种编程语言中，Hook 都是一个重要的概念和实践，值得开发者深入了解和掌握。

### Hook原理
--- 
钩子函数：在系统没有调用该函数之前，钩子程序就先捕获该消息，钩子函数先得到控制权，这时钩子函数就可以加工处理该函数的执行行为，还可以强制结束消息的传递，简单来说，就是把系统的程序拉出来变成我们自己的执行代码片段。

Hook技术其本质就是**劫持函数调用**, 改变目标函数的指向; 无论对安全软件还是恶意软件都是十分关键的一项技术。但是由于处于Linux 用户态，每个进程都有自己独立的进程空间，所以必须先注入到所要Hook 的进程空间，修改其内存中的进程代码，替换其过程表的符号地址。在Android 中一般是通过ptrace函数附加进程，然后向远程进程注人so 库，从而达到监控以及远程进程关键函数挂钩。

💡Hook技术的原理的:就是修改程序的运行时PC“指针”，让程序跳到我们指定的代码中运行，运行完我们的程序，程序PC指针又回到原来程序的下一条指令。简而言之：就篡改程序的运行路径，来执行我们的程序。

**Hook技术的难点是如何找到函数的入口点、替换函数，这就涉及了理解函数的连接与加载机制。**

对于Android的开发来说，hook Native层关键是要理解好**ELF文件（linux平台上的可执行文件）**，hook Java层关键是要了解**虚拟机的特性和Java反射技术。**
