### 联合体
---
“联合”是一种特殊的类，也是一种构造类型的数据结构。在一个“联合”内可以定义多种不同的数据类型， 一个被说明为该“联合”类型的变量中，**允许装入该“联合”所定义的任何一种数据，这些数据共享同一段内存**，已达到节省空间的目的（还有一个节省空间的类型：位域）。

💡同struct一样，联合默认访问权限也是公有的，并且，也具有成员函数。

👉应该说明的是， 这里所谓的共享不是指把多个成员同时装入一个联合变量内， 而是**指该联合变量可被赋予任一成员值**，但每次只能赋一种值， 赋入新值则冲去旧值。

#### 联合与结构的区别？
“联合”与“结构”有一些相似之处。但两者有本质上的不同。在结构中各成员有各自的内存空间， 一个结构变量的总长度是各成员长度之和（空结构除外，同时不考虑边界调整）。而在“联合”中，各成员共享一段内存空间， 一个联合变量的长度等于各成员中最长的长度。

#### 如何使用
对联合变量的赋值，使用都只能是对变量的成员进行。联合变量的成员表示为：  
联合变量名.成员名

例如，a被说明为test类型的变量之后，可使用a.class、a.office  
不允许只用联合变量名作赋值或其它操作，也不允许对联合变量作初始化赋值，赋值只能在程序中进行。  
还要再强调说明的是，一个联合变量，每次只能赋予一个成员值。换句话说，一个联合变量的值就是联合变员的某一个成员值。

### 匿名联合体
---
匿名联合体是**不同时定义任何变量**（包括联合体类型的对象、引用或指向联合体的指针）的无名的联合体定义。 

匿名联合仅仅通知编译器它的成员变量共同享一个地址,而变量本身是直接引用的,不使用通常的点号运算符语法.
```cpp
#include <iostream>
void main()
{
  union{ 
  int test;
  char c; 
  }; 
  test=5;
  c='a';
  std::cout<<i<<" "<<c;
}
```

📒匿名联合体有更多限制：它们不能有成员函数，不能有静态数据成员，且所有数据成员必须公开。只能声明非静态数据成员，外加static_assert 声明 (C++11 起)。

📒匿名联合体的成员被注入到它的外围作用域中（而且不得与其中声明的其他名字冲突）。 

解释：
正如所见到的,联合成分象声明的普通局部变量那样被引用,事实上对于程序而言,这也正是使用这些变量的方式.另外,尽管被定义在一个联合声明中,**他们与同一个程序块内的任何其他局部变量具有相同的作用域级别**.这意味这匿名联合内的成员的名称不能与同一个作用域内的其他一直标志符冲突.

📒命名空间作用域的匿名联合体必须声明为 static，除非它们在无名命名空间出现。 

解释：
因为匿名联合不使用点运算符，所以包含在匿名联合内的元素必须是数据,不允许有成员函数，也不能包含私有或受保护的成员。还有,**全局匿名联合必须是静态(static)的，否则就必须放在匿名命名空间中。**

1）联合里面那些东西不能存放？

我们知道，**联合里面的东西共享内存**，所以静态、引用都不能用，因为他们不可能共享内存。