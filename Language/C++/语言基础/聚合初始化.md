### è¯­æ³•
---
T Object = {å®å‚1ï¼Œ å®å‚2ï¼Œ ...};                   (1)
T Object {å®å‚1ï¼Œ å®å‚2ï¼Œ ...};                     (2)
T Object = {.æŒ‡æ´¾ç¬¦1=å®å‚1ï¼Œ .æŒ‡æ´¾ç¬¦2{å®å‚2}ï¼Œ ...};  (3)
T Object {.æŒ‡æ´¾ç¬¦1=å®å‚1ï¼Œ .æŒ‡æ´¾ç¬¦2{å®å‚2}ï¼Œ ...};  (4)
1,2)Â ç”¨é€šå¸¸çš„åˆå§‹åŒ–å™¨åˆ—è¡¨åˆå§‹åŒ–èšåˆä½“ã€‚
3,4)Â ç”¨[æŒ‡æ´¾åˆå§‹åŒ–å™¨](https://zh.cppreference.com/w/cpp/language/aggregate_initialization#.E6.8C.87.E6.B4.BE.E5.88.9D.E5.A7.8B.E5.8C.96.E5.99.A8)åˆå§‹åŒ–èšåˆä½“ã€‚

### èšåˆä½“
---
_èšåˆä½“_Â æ˜¯ä¸‹åˆ—ç±»å‹ä¹‹ä¸€ï¼š

- æ•°ç»„ç±»å‹
- ç¬¦åˆä»¥ä¸‹æ¡ä»¶çš„ç±»ç±»å‹ï¼ˆé€šå¸¸æ˜¯Â structÂ æˆ–Â unionï¼‰
  - æ²¡æœ‰ç”¨æˆ·å£°æ˜çš„æ„é€ å‡½æ•°
  - æ²¡æœ‰ç”¨æˆ·æä¾›ã€ç»§æ‰¿æˆ– explicit çš„æ„é€ å‡½æ•°
  - æ²¡æœ‰ç”¨æˆ·å£°æ˜æˆ–ç»§æ‰¿çš„æ„é€ å‡½æ•°
  - æ²¡æœ‰ç§æœ‰æˆ–å—ä¿æŠ¤çš„éé™æ€æ•°æ®æˆå‘˜
  - æ²¡æœ‰åŸºç±»
  - æ²¡æœ‰è™šåŸºç±»
  - æ²¡æœ‰ç§æœ‰æˆ–å—ä¿æŠ¤çš„ç›´æ¥åŸºç±»
  - æ²¡æœ‰è™šå‡½æ•°æˆå‘˜
  - æ²¡æœ‰é»˜è®¤æˆå‘˜åˆå§‹åŒ–å™¨
  
èšåˆä½“çš„Â _å…ƒç´ _Â æœ‰ï¼š

- å¯¹äºæ•°ç»„ï¼ŒæŒ‰ä¸‹æ ‡é¡ºåºåŒ…å«æ‰€æœ‰æ•°ç»„å…ƒç´ ï¼Œæˆ–è€…ï¼Œ

|   |   |
|---|---|
|- å¯¹äºç±»ï¼ŒæŒ‰å£°æ˜é¡ºåºåŒ…å«æ‰€æœ‰ä¸æ˜¯åŒ¿å[ä½åŸŸ](https://zh.cppreference.com/w/cpp/language/bit_field "cpp/language/bit field")çš„éé™æ€æ•°æ®æˆå‘˜ã€‚|(C++17 å‰)|
|- å¯¹äºç±»ï¼ŒæŒ‰å£°æ˜é¡ºåºåŒ…å«æ‰€æœ‰ç›´æ¥åŸºç±»ï¼Œç„¶åæŒ‰å£°æ˜é¡ºåºåŒ…å«æ‰€æœ‰ä¸æ˜¯åŒ¿å[ä½åŸŸ](https://zh.cppreference.com/w/cpp/language/bit_field "cpp/language/bit field")æˆ–[åŒ¿åè”åˆä½“](https://zh.cppreference.com/w/cpp/language/union#.E5.8C.BF.E5.90.8D.E8.81.94.E5.90.88.E4.BD.93 "cpp/language/union")æˆå‘˜çš„éé™æ€æ•°æ®æˆå‘˜ã€‚|(C++17 èµ·)|



### C++20 designated initializers
---
#### è¯´æ˜

C++20 å¼•å…¥äº† `designated initializers` æ¥ä½¿ç”¨å®ƒä»¬çš„åå­—**æ¥åˆå§‹åŒ–èšåˆçš„æ•°æ®æˆå‘˜**ã€‚
ğŸ’¡C99å¼•å…¥äº†è¯¥åŠŸèƒ½

èšåˆç±»å‹å¯ä»¥æ˜¯1.æ•°ç»„ç±»å‹çš„å¯¹è±¡ï¼Œ2.æˆ–è€…æ»¡è¶³ä»¥ä¸‹é™åˆ¶çš„ç»“æ„ä½“æˆ–ç±»å¯¹è±¡ï¼š

- åªæœ‰ `public` æ•°æ®æˆå‘˜
- æ²¡æœ‰ç”¨æˆ·å£°æ˜æˆ–ç»§æ‰¿çš„æ„é€ å‡½æ•°
- æ²¡æœ‰è™šå‡½æ•°
- æ²¡æœ‰ `virtual`, `private` æˆ– `protected` åŸºç±»

ä¾‹å¦‚ï¼Œå¯¹äºä¸€ä¸ªå®šä¹‰å¦‚ä¸‹çš„å‘˜å·¥ç»“æ„ä½“

```cpp
struct Employee
{
    char firstInitial;
    char lastInitial;
    int  employeeNumber;
    int  salary { 75'000 };
}; 
```

åœ¨å®šä¹‰ä¸€ä¸ªç»“æ„ä½“å¯¹è±¡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ `uniform initialization` è¿›è¡Œåˆå§‹åŒ–ï¼Œä¾‹å¦‚:

```cpp
Employee anEmployee { 'J', 'D', 42, 80'000 }; 
```

ä¹Ÿå¯ä»¥ä½¿ç”¨ `designated initializers` è¿›è¡Œåˆå§‹åŒ–ï¼Œä¾‹å¦‚ï¼š

```cpp
Employee anEmployee
{
    .firstInitial = 'J',
    .lastInitial = 'D',
    .employeeNumber = 42,
    .salary = 80'000
}; 
```

åœ¨ä½¿ç”¨ `designated initializers` è¿›è¡Œåˆå§‹åŒ–æ—¶ï¼Œ**ä¹Ÿå¯ä»¥åˆå§‹åŒ–éƒ¨åˆ†æˆå‘˜ï¼Œè¿™æ ·ï¼Œæœªè¢«æŒ‡å®šåˆå§‹åŒ–çš„æˆå‘˜åˆ™è¿›è¡Œ `zero initialized`ã€‚** ä¾‹å¦‚ï¼š

```cpp
Employee anEmployee
{
    .firstInitial = 'J',
    .lastInitial = 'D',
    .salary = 80'000
}; 
```

æ­¤æ—¶ï¼Œ`emplyeeNumber` å°†è¢«è®¾ç½®ä¸º `0`.

`designated initializers` çš„ä¼˜ç‚¹åœ¨äºï¼š

- æ›´å®¹æ˜“ç†è§£æŒ‡å®šçš„åˆå§‹åŒ–å™¨æ­£åœ¨åˆå§‹åŒ–ä»€ä¹ˆ
- when members are added to the data structure, existing code using designated initializers keeps working. The new data members will just be initialized with their default values.

## å®ä¾‹

```cpp
#include <iostream>
#include <string>
#include <format>

struct Student
{
    std::string name;
    int nId;
    int nClass;
    int nAge;
};

int main()
{
    Student a{
        .name = "Tom",
        .nId = 123456,
        .nClass = 3,
        .nAge = 20,
    };

    std::cout << std::format("name: {}, id: {}, class: {}, age: {}\n", a.name, a.nId, a.nClass, a.nAge);

    Student b{
        .name = "Jerry",
        .nId = 123457,
        .nAge = 19,
    };

    std::cout << std::format("name: {}, id: {}, class: {}, age: {}\n", b.name, b.nId, b.nClass, b.nAge);

    return 0;
}
```

æ³¨æ„ï¼šä¹±åºçš„æŒ‡æ´¾åˆå§‹åŒ–ã€åµŒå¥—çš„æŒ‡æ´¾åˆå§‹åŒ–ã€æŒ‡æ´¾åˆå§‹åŒ–å™¨ä¸å¸¸è§„åˆå§‹åŒ–å™¨çš„æ··åˆï¼Œä»¥åŠæ•°ç»„çš„æŒ‡æ´¾åˆå§‹åŒ–åœ¨Â [C ç¼–ç¨‹è¯­è¨€](https://zh.cppreference.com/w/c/language/struct_initialization "c/language/struct initialization")ä¸­å—æ”¯æŒï¼Œä½†åœ¨ C++ ä¸å…è®¸ã€‚

```c
struct A { int x, y; };
struct B { struct A a; };
Â 
struct A a = {.y = 1, .x = 2}; // C ä¸­åˆæ³•ï¼ŒC++ ä¸­éæ³•ï¼ˆä¹±åºï¼‰
int arr[3] = {[1] = 5};        // C ä¸­åˆæ³•ï¼ŒC++ ä¸­éæ³•ï¼ˆæ•°ç»„ï¼‰
struct B b = {.a.x = 0};       // C ä¸­åˆæ³•ï¼ŒC++ ä¸­éæ³•ï¼ˆåµŒå¥—ï¼‰
struct A a = {.x = 1, 2};      // C ä¸­åˆæ³•ï¼ŒC++ ä¸­éæ³•ï¼ˆæ··åˆï¼‰
```
[èšåˆåˆå§‹åŒ– - cppreference.com](https://zh.cppreference.com/w/cpp/language/aggregate_initialization#%E6%8C%87%E6%B4%BE%E5%88%9D%E5%A7%8B%E5%8C%96%E5%99%A8)