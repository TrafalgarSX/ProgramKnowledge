### 线程安全概念


### C语言如何实现线程安全
----
无论在windows中，还是Posix中，主线程和子线程的**默认关系**是：
无论子线程执行完毕与否，**一旦主线程执行完毕退出，所有子线程执行都会终止**。这时整个进程结束或僵死（部分线程保持一种**终止执行但还未销毁的状态**，而进程必须在其所有线程销毁后销毁，这时进程处于僵死状态）

**针对这个问题，主线程和子线程之间通常定义两种关系：**
- join 主线程需要明确执行等待操作。在子线程结束后，主线程的等待操作执行完毕，子线程和主线程会合。这时主线程继续执行等待操作之后的下一步操作。主线程必须会合可会合的子线程。否则，系统永远不会主动销毁线程，分配给该线程的系统资源（线程id或句柄，线程管理相关的系统资源）也永远不会释放。

- detach 这表示子线程无需和主线程会合，也就是相分离的。这种情况下，子线程一旦进入终止态，系统立即销毁线程，回收资源。无需在主线程内调用wait()实现会合。

- join是阻塞当前线程，并等待object对应线程结束，该线程继续执行搜索
- detach是将线程从当前线程分离出去，即不受阻塞，操作系统会将其独立对待。它的存储器资源在它终止时由系统自动释放。
